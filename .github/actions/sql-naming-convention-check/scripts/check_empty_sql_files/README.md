# check_changed_sql_files.sh

This script verifies whether the `sql_files.txt` file exists and contains any SQL files. If no SQL files are found, it prints a message, sets an empty validation result, and exits gracefully. If SQL files are present, the script exits without any output, allowing subsequent steps to proceed with validation.

## Usage

```bash
./check_changed_sql_files.sh
```

This script does not take any arguments.

## What It Does

1. **Existence and Size Check**:  
   It checks whether the file `sql_files.txt` exists and has a non-zero size. This file is typically generated by a previous step that identifies changed SQL files.

2. **No Changed SQL Files**:  
   - If `sql_files.txt` does not exist or is empty, the script informs the user:
     ```
     No SQL files found to validate.
     ```
   - It then sets an empty `validation-result` output to signal that no violations are present.
   - Finally, it exits with a `0` status code, indicating no errors occurred.

3. **Changed SQL Files Present**:  
   - If `sql_files.txt` exists and is not empty, the script silently exits without modifying outputs. This indicates that the next steps in the workflow should proceed with validation tasks.

## Exit Codes

- **0**: Successful execution.  
  - Either no files were found (which is a normal scenario) or at least one SQL file is present, allowing subsequent steps to run.

## Dependencies

- **Environment Variables**:  
  - `GITHUB_OUTPUT`: Used to store the output variable (`validation-result`) for a GitHub Actions workflow.

## Example

In a typical GitHub Actions workflow:

1. **Previous Step**: A previous step writes changed SQL file paths to `sql_files.txt`.
2. **This Step**:  
   ```bash
   ./check_changed_sql_files.sh
   ```
   
   - If `sql_files.txt` is empty or missing, this step sets an empty `validation-result` and stops further validation steps.
   - Otherwise, validation steps execute next, using the paths in `sql_files.txt`.