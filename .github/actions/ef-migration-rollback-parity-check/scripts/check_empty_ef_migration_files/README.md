# check_empty_ef_migration_files.sh

This script checks whether `ef_migration_files.txt` exists and contains any entries. It then sets an output variable `ef-migration-files-changed` accordingly, which can be used by subsequent steps in a GitHub Actions workflow.

## Usage

```bash
./check_empty_ef_migration_files.sh
```

This script does not take any arguments.

## What It Does

1. **Existence and Size Check**:  
   It checks whether the file `ef_migration_files.txt` exists and is not empty. This file should be generated by a previous step that identifies EF Core migration files.

2. **No EF Core Migration Files Found**:  
   - If `ef_migration_files.txt` does not exist or is empty, the script prints:
     ```
     No EF Core migration files found.
     ```
   - It then sets `ef-migration-files-changed=false` in the GitHub Actions output and exits with a `0` status code.
   
   This scenario indicates that there are no EF Core migration files to process, so any further steps dependent on these files can be skipped.

3. **EF Core Migration Files Present**:
   - If `ef_migration_files.txt` exists and is not empty, the script sets `ef-migration-files-changed=true` in the GitHub Actions output and exits with a `0` status code.
   
   This notifies subsequent workflow steps that there are EF Core migration files available to process or validate.

## Exit Codes

- **0**: Successful execution.  
  - If no files were found, `ef-migration-files-changed=false` is set.
  - If files were found, `ef-migration-files-changed=true` is set.

## Dependencies

- **Environment Variables**:  
  - `GITHUB_OUTPUT`: Used to store the `ef-migration-files-changed` output variable for a GitHub Actions workflow.

## Example in GitHub Actions

A typical scenario in a GitHub Actions workflow might look like this:

1. **Identify EF Core Migration Files Step**:  
   Generate `ef_migration_files.txt` containing a list of EF Core migration files.

2. **This Step**:  
   ```yaml
   - name: Check EF Core Migration Files
     run: ./check_empty_ef_migration_files.sh
   ```

   - If no files are found, the script sets `ef-migration-files-changed=false` and prints a message. Subsequent steps that rely on these files can then skip their actions.
   - If files are found, the script sets `ef-migration-files-changed=true`, allowing subsequent steps to run validations on those files.

3. **Subsequent Steps**:  
   Use the `ef-migration-files-changed` variable to conditionally run validations:
   ```yaml
   - name: Validate EF Core Migration Files
     if: ${{ steps.check_empty_ef_migration_files.outputs.ef-migration-files-changed == 'true' }}
     run: ./validate_ef_migration_files.sh
   ```