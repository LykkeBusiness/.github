# check_empty_migration_scripts.sh

This script checks whether `migration_scripts.txt` exists and contains any files. It then sets an output variable `migration-scripts-changed` accordingly, which can be used by subsequent steps in a GitHub Actions workflow.

## Usage

```bash
./check_empty_migration_scripts.sh
```

This script does not take any arguments.

## What It Does

1. **Existence and Size Check**:  
   It checks whether the file `migration_scripts.txt` exists and is not empty. This file should be generated by a previous step that identifies migration scripts.

2. **No Migration Scripts Found**:  
   - If `migration_scripts.txt` does not exist or is empty, the script prints:
     ```
     No migration script files found.
     ```
   - It then sets `migration-scripts-changed=false` in the GitHub Actions output and exits with a `0` status code.
   
   This scenario indicates that there are no migration scripts to process, so any further steps dependent on these scripts can be skipped.

3. **Migration Scripts Present**:
   - If `migration_scripts.txt` exists and is not empty, the script sets `migration-scripts-changed=true` in the GitHub Actions output and exits with a `0` status code.
   
   This notifies subsequent workflow steps that there are migration scripts available to process or validate.

## Exit Codes

- **0**: Successful execution.  
  - If no scripts were found, `migration-scripts-changed=false` is set.
  - If scripts were found, `migration-scripts-changed=true` is set.

## Dependencies

- **Environment Variables**:  
  - `GITHUB_OUTPUT`: Used to store the `migration-scripts-changed` output variable for a GitHub Actions workflow.

## Example in GitHub Actions

A typical scenario in a GitHub Actions workflow might look like this:

1. **Identify Migration Scripts Step**:  
   Generate `migration_scripts.txt` containing a list of migration scripts.

2. **This Step**:  
   ```yaml
   - name: Check Migration Scripts
     run: ./check_empty_migration_scripts.sh
   ```

   - If no scripts are found, the script sets `migration-scripts-changed=false` and prints a message. Subsequent steps that rely on migration scripts can then skip their actions.
   - If scripts are found, the script sets `migration-scripts-changed=true`, allowing subsequent steps to run validations on those scripts.

3. **Subsequent Steps**:  
   Use the `migration-scripts-changed` variable to conditionally run validations:
   ```yaml
   - name: Validate Migration Scripts
     if: ${{ steps.check_empty_migration_scripts.outputs.migration-scripts-changed == 'true' }}
     run: ./validate_migration_scripts.sh
   ```